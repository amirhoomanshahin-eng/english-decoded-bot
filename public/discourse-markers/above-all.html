<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Discourse Marker: Above All</title>
<link rel="stylesheet" href="../../style.css">
</head>
<body>
<div class="container">
  <h1>1 â€“ Above All</h1>
  <p><strong>Meaning:</strong> "Above all" is used to highlight the most important point or idea in a sentence.</p>

  <label for="userSentence">Write an example sentence using "above all":</label>
  <textarea id="userSentence" rows="3" style="width:100%;"></textarea>

  <button id="checkBtn">Check Sentence</button>
  <button id="resetBtn">Reset</button>

  <div id="result" style="margin-top:10px;"></div>
</div>

<script>
const textarea = document.getElementById('userSentence');
const checkBtn = document.getElementById('checkBtn');
const resetBtn = document.getElementById('resetBtn');
const resultDiv = document.getElementById('result');

// Load previous example if exists
const savedData = JSON.parse(localStorage.getItem('aboveAllExample'));
if(savedData){
  textarea.value = savedData.sentence;
  resultDiv.innerHTML = `<strong>${savedData.result.toUpperCase()}:</strong> ${savedData.explanation}`;
}

// Check sentence
checkBtn.addEventListener('click', async () => {
  const sentence = textarea.value.trim();
  if(!sentence){
    alert("Please write a sentence first.");
    return;
  }

  resultDiv.textContent = "Checking...";
  try{
    const res = await fetch('/check-above-all', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ sentence })
    });

    const data = await res.json();

    // Show result
    resultDiv.innerHTML = `<strong>${data.result.toUpperCase()}:</strong> ${data.explanation}`;

    // Save to localStorage
    localStorage.setItem('aboveAllExample', JSON.stringify({ sentence, ...data }));

  } catch(e){
    resultDiv.textContent = "Error checking the sentence. Try again.";
  }
});

// Reset
resetBtn.addEventListener('click', () => {
  textarea.value = '';
  resultDiv.textContent = '';
  localStorage.removeItem('aboveAllExample');
});
</script>
</body>
</html>